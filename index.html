<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Heartopia Piano Simulator</title>
    <meta name="description" content="A beautiful interactive piano simulator with multiple layouts and themes.">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Outfit:wght@400;600;700;800&display=swap"
        rel="stylesheet">

    <script src="https://cdn.jsdelivr.net/npm/soundfont-player@0.12.0/dist/soundfont-player.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@tonejs/midi@2.0.28/build/Midi.js"></script>

    <link rel="stylesheet" href="css/style.css">
</head>

<body>
    <div class="app-container">
        <header class="app-header">
            <h1 class="app-title">
                <span class="title-icon">üéπ</span>
                <span>Heartopia Piano Simulator</span>
            </h1>
            <div class="status-badge" id="status">
                <span class="status-dot"></span>
                <span>Loading Piano Sounds...</span>
            </div>
        </header>

        <nav class="controls-bar">
            <div class="control-group">
                <label class="control-label" for="layoutSwitcher">Layout</label>
                <div class="select-wrapper">
                    <select id="layoutSwitcher">
                        <option value="36">Full (36 Keys)</option>
                        <option value="21">No Semi-Tones (21)</option>
                        <option value="15">Simple (15 Keys)</option>
                    </select>
                    <span class="select-arrow">‚ñæ</span>
                </div>
            </div>
            <div class="control-group">
                <label class="control-label" for="langSwitcher">Language</label>
                <div class="select-wrapper">
                    <select id="langSwitcher">
                        <option value="th">Thai (‡πÇ‡∏î, ‡πÄ‡∏£, ‡∏°‡∏µ)</option>
                        <option value="en_sol">English (Do, Re, Mi)</option>
                        <option value="en_notes">English (C, D, E)</option>
                    </select>
                    <span class="select-arrow">‚ñæ</span>
                </div>
            </div>
            <div class="control-group">
                <label class="control-label" for="themeSwitcher">Theme</label>
                <div class="select-wrapper">
                    <select id="themeSwitcher">
                        <option value="light">‚òÄÔ∏è Light</option>
                        <option value="dark">üåô Dark</option>
                    </select>
                    <span class="select-arrow">‚ñæ</span>
                </div>
            </div>
        </nav>

        <section class="midi-panel" id="midiPanel">
            <div class="midi-panel-header">
                <h2 class="midi-panel-title">
                    <span class="midi-icon">üéµ</span>
                    <span>MIDI Auto-Play</span>
                </h2>
                <p class="midi-panel-subtitle">Upload a .mid file and watch it play automatically!</p>
            </div>

            <div class="midi-controls">
                <div class="midi-upload-area" id="midiDropZone">
                    <input type="file" id="midiFileInput" accept=".mid,.midi" hidden>
                    <div class="upload-content" id="uploadContent">
                        <span class="upload-icon">üìÇ</span>
                        <span class="upload-text">Drop a MIDI file here or <strong>click to browse</strong></span>
                    </div>
                    <div class="upload-loaded" id="uploadLoaded" style="display:none">
                        <span class="loaded-icon">‚úÖ</span>
                        <span class="loaded-name" id="midiFileName">song.mid</span>
                        <button class="midi-clear-btn" id="midiClearBtn" title="Remove file">‚úï</button>
                    </div>
                </div>

                <div class="midi-settings">
                    <div class="midi-setting">
                        <label class="control-label" for="midiSpeed">Speed</label>
                        <div class="speed-control">
                            <input type="range" id="midiSpeed" min="0.25" max="3" step="0.05" value="1">
                            <span class="speed-value" id="speedValue">1.00x</span>
                        </div>
                    </div>
                    <div class="midi-setting">
                        <label class="control-label" for="midiCountdown">Countdown</label>
                        <div class="select-wrapper">
                            <select id="midiCountdown">
                                <option value="0">None</option>
                                <option value="3" selected>3 seconds</option>
                                <option value="5">5 seconds</option>
                                <option value="10">10 seconds</option>
                            </select>
                            <span class="select-arrow">‚ñæ</span>
                        </div>
                    </div>
                </div>

                <div class="midi-actions">
                    <button class="midi-play-btn" id="midiPlayBtn" disabled>
                        <span class="play-icon">‚ñ∂</span>
                        <span>Play MIDI</span>
                    </button>
                    <button class="midi-stop-btn" id="midiStopBtn" style="display:none">
                        <span class="stop-icon">‚èπ</span>
                        <span>Stop</span>
                    </button>
                </div>

                <div class="midi-status" id="midiStatus" style="display:none">
                    <div class="midi-progress-bar">
                        <div class="midi-progress-fill" id="midiProgressFill"></div>
                    </div>
                    <span class="midi-status-text" id="midiStatusText">Ready</span>
                </div>

                <div class="midi-countdown-overlay" id="countdownOverlay" style="display:none">
                    <span class="countdown-number" id="countdownNumber">3</span>
                </div>
            </div>
        </section>

        <main class="keyboard-stage">
            <div class="keyboard-container" id="keyboard"></div>
        </main>

        <footer class="app-footer">
            <span>Press your keyboard keys to play, click the keys, or upload a MIDI file! ‚Äî Hold <kbd>Esc</kbd> to
                emergency stop.</span>
        </footer>
    </div>

    <script src="js/script.js"></script>
</body>

</html>